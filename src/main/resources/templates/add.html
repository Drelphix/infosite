<html xmlns:th="http://www.thymeleaf.org">
<head th:insert="main::head">

</head>
<body>
<div id="header" th:replace="main::menu"></div>
<center class="tables">
    <form action="#" method="post" th:action="@{/saveMenu}" th:if="${newmenu}" th:object="${newmenu}">
        <table class="edit">
            <tr>
                <td class="cell">
                    <span>Название меню:</span>
                </td>
                <td class="cell"><input class="edit" required th:field="*{name}" type="text"></td>
            </tr>
        </table>
        <input class="button_success" type="submit" value="Сохранить">
    </form>
    <!--Редактирование строки-->
    <form action="#" method="post" th:action="@{/edit}" th:if="${lines}" th:object="${lines}">
        <table class="edit">
            <tr>
                <th class="cell" colspan="2"><span th:text="${tableName}"></span></th>
            </tr>
            <input th:field="*{idSubMenu}" type="hidden">
            <input th:field="*{idTable}" type="hidden">
            <tr th:each="line,itemStat: *{lines}">
                <td class="cell">
                    <span th:text="${cols.get(itemStat.index).name}"></span>
                </td>
                <td class="cell">
                    <input th:field="*{lines[__${itemStat.index}__].idLine}" type="hidden">
                    <input class="edit" required th:field="*{lines[__${itemStat.index}__].data}" type="text">
                    <input th:field="*{lines[__${itemStat.index}__].col}" type="hidden">
                </td>
            </tr>
        </table>
        <input class="button_success" type="submit" value="Сохранить">
    </form>
    <!--Редактирование таблицы-->
    <div th:if="${table}" th:object="${table}">
        <form action="#" method="post" th:action="@{/editTab}">
            <table class="edit">
                <tr>
                    <th colspan="2">
                        <span>Название таблицы</span>
                    </th>
                </tr>
                <tr>
                    <td class="cell">
                        <input th:field="*{subMenu}" type="hidden">
                        <input th:field="*{id}" type="hidden">
                        <input class="edit" required th:field="*{name}" type="text"></td>
                    <td class="delLine "><a class="link" href="#" th:href="@{/delTab(id=*{id})}">Удалить
                        таблицу</a></td>

                </tr>
            </table>
            <br>
            <table class="edit">
                <th class="cell" colspan="3">
                    Список стоблцов:
                </th>
                <tr th:each="col,itemStat: *{cols}">
                    <input th:field="*{cols[__${itemStat.index}__].idColumn}" type="hidden">
                    <td class="cell"><input class="edit" required th:field="*{cols[__${itemStat.index}__].name}"
                                            type="text">
                    </td>
                    <td class="cell"><input th:field="*{cols[__${itemStat.index}__].hidden}" type="checkbox">
                    </td>
                    <input th:field="*{cols[__${itemStat.index}__].table}" type="hidden">
                    <input th:field="*{cols[__${itemStat.index}__].lines}" type="hidden">
                    <td class="delLine"><a class="link" href="#"
                                           th:href="@{/delCol(tab=${table.id},col=*{cols[__${itemStat.index}__].idColumn})}">Удалить</a>
                    </td>
                </tr>
                <tr>
                    <td class="delLine" colspan="3"><a class="link" href="#" th:href="@{/addCol(tab=${table.id})}">Добавить
                        столбец</a></td>
                </tr>
            </table>
            <br>
            <input class="button_success" type="submit" value="Сохранить">
        </form>
    </div>
    <!--Редактирование меню-->
    <div align="center" th:if="${menu}" th:object="${menu}">
        <form action="#" method="post" th:action="@{/editMenu}">
            <input th:field="*{idMenu}" type="hidden">
            <table class="edit">
                <tr>
                    <td class="cell" colspan="2">
                        <span>Меню</span>
                    </td>
                </tr>
                <tr>
                    <td class="cell">
                        <input class="edit" th:field="*{name}" type="text">
                    </td>
                    <td class="delLine ">
                        <a class="link" href="#" th:href="@{/delMenu(id=*{idMenu})}">Удалить меню</a>
                    </td>
                </tr>
            </table>
            <br>

            <table class="edit">
                <tr>
                    <td class="cell" colspan="2">
                        <span>Список подменю:</span>
                    </td>
                </tr>
                <tr th:each="subMenu, itemStat:*{subMenuSet}">
                    <input th:field="*{subMenuSet[__${itemStat.index}__].idSubMenu}" type="hidden">
                    <td class="cell">
                        <input class="edit" required th:field="*{subMenuSet[__${itemStat.index}__].name}"
                               type="text">
                    </td>
                    <input th:field="*{subMenuSet[__${itemStat.index}__].menu}" type="hidden">
                    <td class="cell">
                        <a class="link" href="#"
                           th:href="@{/delSub(id=*{subMenuSet[__${itemStat.index}__].idSubMenu})}">Удалить
                            подменю</a>
                    </td>
                </tr>
                <tr>
                    <td class="cell" colspan="2">
                        <a class="link" href="#" th:href="@{/addSub(id=${menu.idMenu})}">Добавить подменю</a>
                    </td>
                </tr>
            </table>
            <input class="button_success" type="submit" value="Сохранить">
        </form>
    </div>
    <!--Добавление таблицы-->
    <div align="center" th:if="${submenu}" th:object="${submenu}">
        <form action="#" method="post" th:action="@{/addTab}">
            <input th:field="*{menu}" type="hidden">
            <input th:field="*{idSubMenu}" type="hidden">
            <table class="edit">
                <tbody>
                <tr>
                    <td class="cell"><span>Название подменю:</span></td>
                    <td class="cell"><input class="edit" th:field="*{name}" type="text"></td>
                </tr>
                </tbody>
            </table>
            <br>
            <table class="edit">
                <tr>
                    <td class="cell"><span>Список таблиц:</span></td>
                </tr>
                <tr th:each="table, itemStat:*{tables}">
                    <input th:field="*{tables[__${itemStat.index}__].idTable}" type="hidden">
                    <td class="cell"><input class="edit" required th:field="*{tables[__${itemStat.index}__].name}"
                                            type="text">
                    </td>
                    <input th:field="*{tables[__${itemStat.index}__].subMenu}" type="hidden">
                </tr>
            </table>
            <input class="button_success" type="submit" value="Сохранить">
        </form>
    </div>
</center>
</body>
</html>